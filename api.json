{
  "swagger": "2.0",
  "info": {
    "title": "main-user",
    "version": "3.0",
    "contact": {
      "name": "xc",
      "url": "http://jinuo.me",
      "email": "xiachuan@jinuo.me"
    },
    "description": "main api"
  },
  "schemes": [],
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "paths": {
    "/info": {
      "get": {
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/UserBrief"
            }
          }
        },
        "summary": "获取用户信息",
        "description": "获取用户信息",
        "operationId": "getUserInfo",
        "consumes": [
          "application/json"
        ],
        "security": [
          {
            "main": []
          }
        ],
        "tags": [
          "MainUser"
        ]
      },
      "put": {
        "summary": "修改用户信息",
        "operationId": "updateUser",
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "security": [
          {
            "main": []
          }
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/ModUser"
            }
          }
        ],
        "tags": [
          "MainUser"
        ]
      },
      "parameters": []
    },
    "/register": {
      "post": {
        "summary": "用户邮箱注册",
        "operationId": "register",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/LoginToken"
            }
          }
        },
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/UserRegisterParam"
            }
          }
        ],
        "description": "",
        "tags": [
          "MainUser"
        ]
      },
      "parameters": []
    },
    "/email/code": {
      "get": {
        "summary": "发送邮箱验证码 simple的通用方法",
        "operationId": "sendSimpleCode",
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "tags": [
          "MainUser"
        ],
        "parameters": [
          {
            "type": "string",
            "in": "query",
            "name": "business",
            "description": "类型 REGISTER注册,WITHDRAW提现",
            "required": true
          },
          {
            "type": "string",
            "in": "query",
            "name": "lang",
            "description": "语言",
            "required": true
          },
          {
            "type": "string",
            "in": "query",
            "name": "childType",
            "description": "URL/CODE",
            "required": true
          },
          {
            "type": "string",
            "in": "query",
            "name": "email",
            "description": "RESET_PASSWORD,需要邮箱"
          }
        ],
        "description": ""
      },
      "parameters": []
    },
    "/password": {
      "put": {
        "summary": "找回密码",
        "operationId": "changePassword",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "null"
            }
          }
        },
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/UserChangePasswordParam"
            }
          }
        ],
        "tags": [
          "MainUser"
        ]
      },
      "post": {
        "summary": "重置密码",
        "operationId": "resetPassword",
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "tags": [
          "MainUser"
        ],
        "security": [
          {
            "main": []
          }
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/ResetPasswordParam"
            }
          }
        ]
      },
      "parameters": []
    },
    "/login/email": {
      "post": {
        "operationId": "loginByEmail",
        "summary": "用户email登陆",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/EmailLoginParam"
            },
            "description": ""
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/LoginToken"
            },
            "examples": {}
          }
        },
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "description": "",
        "tags": [
          "MainUser"
        ]
      },
      "parameters": []
    },
    "/token": {
      "get": {
        "summary": "用户AccessToken列表",
        "tags": [
          "MainUser"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AccessToken"
              }
            }
          }
        },
        "operationId": "tokenList",
        "security": [
          {
            "main": []
          }
        ]
      },
      "post": {
        "summary": "新增AccessToken",
        "operationId": "addAccessToken",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/AddUserTokenResponse"
            }
          }
        },
        "tags": [
          "MainUser"
        ],
        "security": [
          {
            "main": []
          }
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/AddAccessTokenRequest"
            }
          }
        ]
      },
      "delete": {
        "summary": "删除accesstoken",
        "operationId": "delToken",
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "tags": [
          "MainUser"
        ],
        "security": [
          {
            "main": []
          }
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/DelTokenRequest"
            }
          }
        ],
        "description": ""
      },
      "parameters": []
    }
  },
  "definitions": {
    "UserBrief": {
      "type": "object",
      "title": "",
      "properties": {
        "name": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        },
        "email": {
          "type": "string",
          "description": "邮箱"
        },
        "id": {
          "type": "integer"
        },
        "password": {
          "type": "boolean"
        }
      }
    },
    "AccessToken": {
      "title": "校验用户名密码结果",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "id": {
          "type": "integer"
        }
      }
    },
    "EmailSingleCodeParams": {
      "title": "EmailSingleCodeParams",
      "type": "object",
      "description": "邮箱验证码",
      "properties": {
        "code": {
          "type": "string",
          "description": "验证码"
        }
      },
      "required": [
        "code"
      ],
      "x-examples": {}
    },
    "UserRegisterParam": {
      "title": "UserRegisterParam",
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "format": "email",
          "pattern": "^\\S+@([A-Za-z0-9_-])+.([A-Za-z]{2,4})$"
        },
        "password": {
          "type": "string",
          "pattern": "^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$"
        },
        "code": {
          "type": "string"
        }
      },
      "required": [
        "email",
        "password",
        "code"
      ]
    },
    "EmailCodeParam": {
      "title": "EmailCodeParam",
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "format": "email",
          "pattern": "^\\S+@([A-Za-z0-9_-])+.([A-Za-z]{2,4})$"
        },
        "business": {
          "type": "integer",
          "description": "说明发邮箱的用途，有以下：\n0 邮箱验证 \n1 重置密码 \n2 提现"
        }
      },
      "required": [
        "email",
        "business"
      ]
    },
    "UserChangePasswordParam": {
      "title": "UserChangePasswordParam",
      "type": "object",
      "properties": {
        "code": {
          "type": "string"
        },
        "password": {
          "type": "string",
          "pattern": "^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$"
        }
      },
      "required": [
        "code",
        "password"
      ]
    },
    "EmailLoginParam": {
      "type": "object",
      "title": "email登录参数",
      "properties": {
        "email": {
          "type": "string",
          "format": "email",
          "pattern": "^\\S+@([A-Za-z0-9_-])+.([A-Za-z]{2,4})$"
        },
        "password": {
          "type": "string",
          "minLength": 8,
          "maxLength": 16
        },
        "code": {
          "type": "string",
          "description": "邮箱验证码登陆"
        }
      },
      "required": [
        "email"
      ]
    },
    "ModUser": {
      "title": "ModUser",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        }
      }
    },
    "AddAccessTokenRequest": {
      "title": "DelMfa",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "恢复码"
        },
        "password": {
          "type": "string",
          "description": "password"
        }
      },
      "required": [
        "name",
        "password"
      ]
    },
    "UserCardInfo": {
      "type": "object",
      "title": "UserCardInfo",
      "properties": {
        "name": {
          "type": "string"
        },
        "rank": {
          "type": "integer",
          "description": "用户游戏排名"
        },
        "bets": {
          "type": "integer",
          "description": "下注次数"
        },
        "wagered": {
          "type": "number",
          "description": "游戏流水"
        },
        "profit": {
          "type": "number"
        },
        "currency": {
          "type": "string"
        },
        "createdTime": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "UserSImple": {
      "type": "object",
      "title": "UserSImple",
      "properties": {
        "balance": {
          "type": "number"
        },
        "id": {
          "type": "integer"
        },
        "rank": {
          "type": "integer",
          "description": "用户游戏排名"
        },
        "betCount": {
          "type": "integer",
          "description": "下注次数"
        },
        "gameAmount": {
          "type": "number",
          "description": "游戏流水"
        },
        "gameProfit": {
          "type": "number"
        }
      }
    },
    "UserPermission": {
      "title": "UserPermission",
      "type": "object",
      "properties": {
        "game": {
          "type": "string"
        },
        "recharge": {
          "type": "string"
        },
        "withdraw": {
          "type": "string"
        }
      }
    },
    "UserVerifyParam": {
      "title": "UserVerifyParam",
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "pattern": "^\\S+@([A-Za-z0-9_-])+.([A-Za-z]{2,4})$"
        },
        "code": {
          "type": "string"
        }
      },
      "required": [
        "email",
        "code"
      ]
    },
    "ResetPasswordParam": {
      "title": "ResetPasswordParam",
      "type": "object",
      "properties": {
        "oldPassword": {
          "type": "string",
          "pattern": "^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$"
        },
        "newPassword": {
          "type": "string",
          "pattern": "^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$"
        }
      },
      "required": [
        "oldPassword",
        "newPassword"
      ]
    },
    "LoginToken": {
      "title": "LoginToken",
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        }
      }
    },
    "AddUserTokenResponse": {
      "title": "AddUserTokenResponse",
      "type": "object",
      "properties": {
        "accessToken": {
          "type": "string"
        }
      }
    },
    "DelTokenRequest": {
      "title": "DelTokenRequest",
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "password": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "password"
      ]
    }
  },
  "basePath": "/user/main",
  "securityDefinitions": {
    "main": {
      "name": "main",
      "type": "apiKey",
      "in": "header"
    },
    "admin_token": {
      "name": "admin_token",
      "type": "apiKey",
      "in": "header"
    }
  },
  "tags": [
    {
      "name": "MainUser"
    },
    {
      "name": "MainVip"
    },
    {
      "name": "MainSpread"
    }
  ],
  "x-ms-parameterized-host": {
    "useSchemePrefix": false,
    "hostTemplate": "/api"
  }
}